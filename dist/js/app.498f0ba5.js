(function(){"use strict";var e={595:function(e,n,t){var r=t(6369),o=function(){var e=this,n=e._self._c;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i={name:"App",components:{}},s=i,l=t(1001),c=(0,l.Z)(s,o,a,!1,null,null,null),u=c.exports,g=t(2631),d=function(){var e=this,n=e._self._c;return n("simple-layout",{staticClass:"index-page"},[e.getProgress?n("loading-curtain"):e._e(),n("map-object",{attrs:{polygons:e.indexPolygons,center:e.region.coords,"smooth-polygons":!0},on:{initialized:e.handleMapInitialized}}),n("avg-price-hint",{staticClass:"index-page__price-hint"})],1)},p=[],m=function(){var e=this,n=e._self._c;return n("div",{staticClass:"map-object"},[n("yandex-map",{staticClass:"map-object__map",attrs:{settings:e.settings,coords:e.center,zoom:e.zoom,controls:e.controls},on:{"map-was-initialized":e.handleMapInitialized}},[e._l(e.polygons,(function(t){return n("ymap-marker",{key:`polygon_${t.id}`,attrs:{"marker-type":"Polygon",coords:[e.getSmoothed(t.polygon)],"marker-id":t.id,"hint-content":t.name,options:e.getPolygonOptions(t)},on:{click:function(n){return e.handlePolygonClick(t)}}})})),e._l(e.markers,(function(t){return n("ymap-marker",{key:`marker_${t.id}`,attrs:{"marker-type":"Placemark",coords:t.coords,"marker-id":`m${t.id}`,"hint-content":t.name,options:e.getMarkerOptions(t),icon:t.icon},on:{click:function(n){return e.handleMarkerClick(t)}}})}))],2)],1)},h=[],_=t(4855);class f{static getPolygonCenter(e){const n=Math.min(...e.map((e=>e[0]))),t=Math.max(...e.map((e=>e[0]))),r=Math.min(...e.map((e=>e[1]))),o=Math.max(...e.map((e=>e[1])));return[(n+t)/2,(r+o)/2]}}var v=t(1369),y=t.n(v),x={name:"MapObject",components:{yandexMap:_.xR,ymapMarker:_.Jk},props:{polygons:{type:Array,default:()=>[]},smoothPolygons:{type:Boolean,default:!0},center:{type:Array,default:()=>[55.755864,37.617698]},zoom:{type:Number,default:12}},data(){return{controls:[]}},computed:{settings:{get(){return{apiKey:"cd38a715-a2ba-4c42-9103-83b76b5dc0b0",lang:this.$lang,coordorder:"latlong",enterprise:!1,version:"2.1"}}},markers:{get(){return this.polygons?.length?this.polygons.map((e=>({id:e.id,name:e.name,coords:f.getPolygonCenter(e.polygon),icon:{layout:"default#imageWithContent",imageHref:"",contentLayout:`<div class="map-object__marker" style="background: ${e?.color?.marker?.background};"><span>${e.markerText}</span></div>`}}))):[]}}},methods:{handleMarkerClick(){},handlePolygonClick(){},getSmoothed(e){return this.smoothPolygons?y()(y()(e)):e},getPolygonOptions(e){return{fillColor:e?.color?.fill,strokeColor:e?.color?.stroke}},getMarkerOptions(){return{}},handleMapInitialized(){this.$nextTick((()=>{this.$emit("initialized")}))}}},k=x,b=(0,l.Z)(k,m,h,!1,null,null,null),C=b.exports,P=function(){var e=this,n=e._self._c;return n("div",{staticClass:"simple-layout"},[e._t("default")],2)},O=[],w={name:"SimpleLayout"},M=w,$=(0,l.Z)(M,P,O,!1,null,"6215aeac",null),I=$.exports,S=function(){var e=this,n=e._self._c;return n("div",{staticClass:"loading-curtain"},[n("div",{staticClass:"loading-curtain__blur"}),n("div",{staticClass:"loading-curtain__wrapper"},[n("span",[e._v(e._s(e.l10n.loading)+"...")])])])},Z=[],j=JSON.parse('{"en":{"loading":"Loading"},"ru":{"loading":"Загрузка"},"ar":{"loading":"جار التحميل"}}'),R={name:"LoadingCurtain",computed:{l10n:{get(){return j[this.$lang]}}}},E=R,z=(0,l.Z)(E,S,Z,!1,null,"77dac6cc",null),A=z.exports,L=t(3822);class T{static getColorByIndexExposition(e){return e>=0&&e<3?{fill:"rgba(0, 172, 255, 0.5)",stroke:"rgba(0, 77, 255, 1)",marker:{background:"#004DFF"}}:e>=3&&e<6?{fill:"rgba(155, 53, 197, 0.5)",stroke:"rgba(146, 22, 197, 1)",marker:{background:"#9B35C5"}}:e>=6?{fill:"rgba(252, 84, 31, 0.5)",stroke:"rgba(252, 84, 31, 1)",marker:{background:"#FC541F"}}:null}}var N=JSON.parse('{"en":{"loading":"Loading"},"ru":{"loading":"Загрузка"},"ar":{"loading":"جار التحميل"}}'),F=function(){var e=this,n=e._self._c;return n("div",{staticClass:"avg-price-hint"},[n("span",{staticClass:"avg-price-hint__title"},[e._v(e._s(e.l10n.avg_price))]),n("div",{staticClass:"avg-price-hint__content"},[n("div",{staticClass:"avg-price-hint__scale"}),n("div",{staticClass:"avg-price-hint__scale-text"},[n("span",{staticClass:"avg-price-hint__scale-text--high"},[e._v(e._s(e.l10n.high))]),n("span",{staticClass:"avg-price-hint__scale-text--medium"},[e._v(e._s(e.l10n.medium))]),n("span",{staticClass:"avg-price-hint__scale-text--low"},[e._v(e._s(e.l10n.low))])])])])},H=[],B=JSON.parse('{"en":{"avg_price":"Average price","high":"High","medium":"Medium","low":"Low"},"ru":{"avg_price":"Средняя цена","high":"Высокий","medium":"Средний","low":"Низкий"},"ar":{"avg_price":"Average price","high":"High","medium":"Medium","low":"Low"}}'),J={name:"AvgPriceHint",computed:{l10n:{get(){return B[this.$lang]}}}},D=J,G=(0,l.Z)(D,F,H,!1,null,"d0a79e88",null),K=G.exports,W={name:"IndexPage",components:{AvgPriceHint:K,SimpleLayout:I,MapObject:C,LoadingCurtain:A},data(){return{region:{name:"Dubai",coords:["25.197172","55.274274"],currency:"AED"}}},computed:{...(0,L.Se)("index",["getProgress","getRegionIndexes"]),l10n:{get(){return N[this.$lang]}},indexPolygons:{get(){return this.getRegionIndexes?.length?this.getRegionIndexes.filter((e=>e.exposition_stats)).map((e=>({id:e.id,name:e.name,polygon:e.polygon,color:e.exposition_stats?T.getColorByIndexExposition(e.exposition_stats.color_index_exposition):null,markerText:e?.exposition_stats?.price_median+" "+this.region.currency}))):[]}}},methods:{handleMapInitialized(){this.$store.dispatch("index/fetchRegionIndexes",{regionName:this.region.name})}}},q=W,Q=(0,l.Z)(q,d,p,!1,null,"030134b0",null),U=Q.exports;r.ZP.use(g.ZP);const V=[{path:"/",name:"main",component:null,redirect:{name:"index"}},{path:"/index",name:"index",component:U}],X=new g.ZP({mode:"history",routes:V});var Y=X;r.ZP.use(L.ZP);var ee=new L.ZP.Store({}),ne={$lang:"en"};const te="SET_LANG";var re={[te](e,n){e.$lang=n}},oe={$lang:e=>e.$lang},ae={},ie={namespaced:!0,state:ne,mutations:re,getters:oe,actions:ae},se={install(e,n){n.store.registerModule("ui",ie),e.mixin({computed:{...(0,L.Se)("ui",["$lang"])}})}},le={progress:!1,regionIndexes:[],error:null};const ce="SET_MAP_REGIONS",ue="SET_PROGRESS",ge="SET_ERROR";var de={[ue](e,n){e.progress=n},[ce](e,n){e.regionIndexes=n},[ge](e,n){e.error=n}},pe={getProgress:e=>e.progress,getRegionIndexes:e=>e.regionIndexes,getError:e=>e.error},me=t(4311),he={async fetchRegionIndexes({commit:e},{regionName:n}){try{e(ge,null),e(ue,!0);const{data:t}=await me.Z.get(`/api/__pd?format=json&json_action=get_city_area_polygons&aglomeration_name=${n}`,{});return e(ce,t),t}catch(t){return e(ge,t.message),t}finally{e(ue,!1)}}},_e={namespaced:!0,state:le,mutations:de,getters:pe,actions:he},fe={install(e,n){n.store.registerModule("index",_e)}};r.ZP.config.productionTip=!1,r.ZP.use(se,{store:ee}),r.ZP.use(fe,{store:ee}),new r.ZP({router:Y,store:ee,render:e=>e(u)}).$mount("#app")}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return e[r].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,r,o,a){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var s=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var c=o();void 0!==c&&(n=c)}}return n}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var o,a,i=r[0],s=r[1],l=r[2],c=0;if(i.some((function(n){return 0!==e[n]}))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(l)var u=l(t)}for(n&&n(r);c<i.length;c++)a=i[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(u)},r=self["webpackChunkrealiste"]=self["webpackChunkrealiste"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(595)}));r=t.O(r)})();
//# sourceMappingURL=app.498f0ba5.js.map